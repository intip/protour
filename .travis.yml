language: python
python:
  - "2.7"
env:
  - DJANGO=1.5 DB=postgres
before_script:
  - psql -c 'create database test_portalturismo;' -U postgres
install:
  - sudo npm install -g less
  - pip install -r project/requirements.txt --use-mirrors
script:
  - git submodule init
  - git submodule update
  - python manage.py syncdb --settings=project.test_settings --noinput
  - python manage.py migrate_business --settings=project.test_settings
  - coverage run --source=../apps/evento --omit='../apps/*migrations*' test.sh
  - coverage report -m
notifications:
  email:
    recipients:
      - guilherme.vierno@intip.com.br
